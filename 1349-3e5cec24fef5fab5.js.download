"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1349],{3521:(e,t,n)=>{n.d(t,{AnimatedIconProvider:()=>s,w:()=>l});var r=n(7336),a=n(80644);let l=(0,a.createContext)(null);function s(e){let{children:t}=e,[n,s]=(0,a.useState)(()=>new Map),i=(0,a.useRef)(null),o=(0,a.useCallback)(e=>{let t=e.target;n.forEach((n,r)=>{if(n.parent.contains(t))switch(e.type){case"mouseover":i.current!==r&&(i.current=r,n.transitionTo("hover"));break;case"mouseout":n.parent.contains(e.relatedTarget)||(i.current=null,n.transitionTo("idle"));break;case"mousedown":n.transitionTo("tap");break;case"mouseup":n.transitionTo(i.current===r?"hover":"idle")}else"mouseover"===e.type&&i.current===r&&(i.current=null,n.transitionTo("idle"))})},[n]);(0,a.useEffect)(()=>(window.addEventListener("mouseover",o,!0),window.addEventListener("mouseout",o,!0),window.addEventListener("mousedown",o,!0),window.addEventListener("mouseup",o,!0),()=>{window.removeEventListener("mouseover",o,!0),window.removeEventListener("mouseout",o,!0),window.removeEventListener("mousedown",o,!0),window.removeEventListener("mouseup",o,!0)}),[o]);let d=(0,a.useCallback)((e,t)=>{s(n=>new Map(n).set(e,t))},[]),c=(0,a.useCallback)(e=>{s(t=>{let n=new Map(t);return n.delete(e),n})},[]);return(0,r.jsx)(l.Provider,{value:{registerIcon:d,unregisterIcon:c},children:t})}},7877:(e,t,n)=>{n.d(t,{a:()=>i});var r=n(7336),a=n(4495),l=n(81616),s=n(24582);function i(e){let{children:t,Icon:n,selected:i,className:o,onClick:d}=e;return(0,r.jsxs)(l.$,{className:(0,a.cn)("focus:bg-background flex h-12 items-center justify-between gap-1 px-4 font-medium text-gray-900 shadow-none transition-colors hover:focus:bg-gray-100",i&&"border border-blue-700 bg-blue-100 text-blue-600 hover:border-blue-700 hover:bg-blue-100 hover:brightness-[97%] focus:border-blue-700 focus:bg-blue-100 hover:focus:bg-blue-100 focus-visible:border-blue-700",o),onClick:d,size:"sm",type:"button",variant:"secondary",children:[(0,r.jsxs)("div",{className:"shrink-1 flex items-center gap-2 overflow-hidden",children:[n&&(0,r.jsx)(n,{className:"h-4 w-4 shrink-0"}),(0,r.jsx)("span",{className:"overflow-hidden text-ellipsis",children:t})]}),(0,r.jsx)("div",{className:(0,a.cn)("flex size-4 shrink-0 items-center justify-center rounded-sm border text-white",i&&"border-0 bg-blue-600"),children:i?(0,r.jsx)(s.J,{className:"stroke-background h-2 w-2"}):null})]})}},18730:(e,t,n)=>{n.d(t,{Pk:()=>f,jo:()=>u,xz:()=>c});var r=n(59103),a=n(77674),l=n(80644),s=n(90756),i=n(23638),o=n(10299);let d=["/chat/internal","/chat/projects","/chat/upgrade","/chat/explore","/chat/block-subdomain","/chat/blocks","/chat/history"];function c(){let{data:e,mutate:t}=(0,r.Ay)("chat:id"),n=(0,o.usePathname)();return(0,l.useEffect)(()=>{d.includes(n)&&t(void 0,!1)},[n,t]),{chatId:e}}function u(){let{chatId:e}=c(),{saveLeafMessageId:t,cacheForkKey:n}=(0,i.f)(),{mutate:r}=(0,a.iX)();return(0,l.useCallback)(a=>{r(["chat:state",e],r=>{let l=null!=r?r:s.k;return(l.activeForkKey&&n(l.activeForkKey),"function"==typeof a)?{...l,...a(l)}:(a.activeForkKey&&a.saveLeafMessageId&&e&&(delete a.saveLeafMessageId,t({chatId:e,activeForkKey:a.activeForkKey})),{...l,...a})})},[e,r,n,t])}function f(){let{chatId:e}=c(),{data:t}=(0,r.Ay)(["chat:state",e]);return{...null!=t?t:s.k,chatId:null!=e?e:"something_went_wrong"}}},20685:(e,t,n)=>{n.d(t,{o:()=>i});var r=n(7336),a=n(80644),l=n(4495),s=n(49388);let i=(0,a.forwardRef)((e,t)=>{let{maxHeight:n=384,minHeight:i=42,className:o,resizeFunctionRef:d,...c}=e,u=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,()=>u.current);let f=(0,a.useCallback)(()=>{let e=u.current;if(!e)return;e.style.height="".concat(i,"px");let t=e.scrollHeight;e.style.height="".concat(Math.max(i,Math.min(t,n)),"px")},[n,i]);(0,a.useImperativeHandle)(d,()=>f);let h=(0,a.useCallback)(e=>{var t;f(),u.current&&(null===(t=c.onChange)||void 0===t||t.call(c,e))},[c,f]);return(0,a.useEffect)(()=>{let e=new MutationObserver(f);return u.current&&e.observe(u.current,{characterData:!0,subtree:!0}),()=>e.disconnect()},[h,f]),(0,s.wY)({ref:u,onResize:f}),(0,a.useEffect)(()=>{f()},[f]),(0,r.jsx)("textarea",{...c,className:(0,l.cn)("resize-none overflow-auto",o),autoComplete:"off",onChange:h,"data-1p-ignore":!0,"data-dashlane-disabled-on-field":!0,ref:u,style:{...c.style,minHeight:"".concat(i,"px"),maxHeight:"".concat(n,"px")}})});i.displayName="ResizableTextArea"},23638:(e,t,n)=>{n.d(t,{f:()=>c});var r=n(85168),a=n(75719),l=n(59103),s=n(18730),i=n(80644);let o={};async function d(e,t){let{arg:n}=t,a=(0,r.K1)(n.activeForkKey);if(a)return fetch(e,{method:"POST",body:JSON.stringify({chatId:n.chatId,messageId:a})}).then(e=>e.json())}function c(){let{chatId:e}=(0,s.xz)(),{trigger:t}=(0,a.A)("/chat/api/chat/leaf",d),{data:n,mutate:r}=(0,l.Ay)(["chat:leaf:cache",e],null),c=(0,i.useCallback)(e=>{r(t=>{if(!e)return t;let n=!1,r={...t||o};for(let t of e)r[t]!==e&&(r[t]=e,n=!0);return n?r:t})},[r]),u=(0,i.useCallback)(e=>{let{chatId:n,activeForkKey:r}=e;n&&t({chatId:n,activeForkKey:r})},[c,t]);return{cacheForkKey:c,saveLeafMessageId:u,forkKeyCache:n||o,switchForkKey:c}}},29050:(e,t,n)=>{n.d(t,{p:()=>a});var r=n(30009);let a=(0,r.createServerReference)("408c4e84c5477435e244d8ff320c9340f4c4f540fe",r.callServer,void 0,r.findSourceMapURL,"sendMessageFeedback")},35399:(e,t,n)=>{n.d(t,{FeedbackDialog:()=>k,f:()=>w});var r=n(7336),a=n(59103),l=n(4495),s=n(93293),i=n(33400),o=n(34142),d=n(98898),c=n(71279),u=n(80644),f=n(15993),h=n(30009);let m=(0,h.createServerReference)("40a7b572cd5e9622d15fc92958a0ebb0045ab20618",h.callServer,void 0,h.findSourceMapURL,"sendGeneralFeedback");var v=n(26939),g=n(81616),x=n(38559),b=n(67952),p=n(20685);function w(){let{data:e,mutate:t}=(0,a.Ay)("feedback-dialog-show",null,{fallbackData:!1});return{showFeedbackDialog:e,setFeedbackDialog:t}}function k(){let e=(0,b.k)("feedbackDialog"),{showFeedbackDialog:t,setFeedbackDialog:n}=w(),[a,l]=(0,u.useState)(""),[s,i]=(0,u.useState)(void 0),[o,d]=(0,u.useState)(),c=(e,t)=>{t&&(l(""),i(void 0),d(void 0)),n(e)};return(0,r.jsxs)(x.Modal,{onOpenChange:c,open:t,children:[(0,r.jsxs)(x.ModalHeader,{children:[(0,r.jsx)(x.ModalTitle,{children:e("title")}),(0,r.jsx)(x.ModalDescription,{children:e("description")})]}),(0,r.jsx)(x.ModalContent,{children:(0,r.jsx)(j,{feedback:a,selectedOption:s,setFeedback:l,setFeedbackDialog:c,setSelectedOption:i,setValidationError:d,validationError:o})})]})}function y(e){let{children:t,selectedOption:n,option:a,handleOptionClick:s}=e;return(0,r.jsx)(g.$,{className:(0,l.cn)("transition-all duration-300",n===a&&"border-gray-900 hover:border-gray-900 focus:border-gray-900 focus-visible:border-gray-900"),onClick:()=>s(a),size:"sm",type:"button",variant:"secondary",children:t})}function j(e){let{feedback:t,setFeedback:n,selectedOption:a,setSelectedOption:u,validationError:h,setValidationError:w,setFeedbackDialog:k}=e,j=(0,b.k)("feedbackDialog"),{user:C}=(0,v.J)(),N=e=>{e&&u(e),w(void 0)},{formRef:I,onKeyDown:M}=(0,c.G)();return(0,r.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:e=>{if(e.preventDefault(),""===t.trim()){w(j("error.enterFeedback"));return}if(!a){w(j("error.selectEmoji"));return}m({feedback:t,url:location.href,sentiment:a,user:C}),k(!1,!0),(0,f.oR)(j("successToast"))},ref:I,children:[(0,r.jsx)(d.T,{asChild:!0,children:(0,r.jsx)(p.o,{maxHeight:224,minHeight:80,name:"feedback",onKeyDown:M,placeholder:j("yourFeedback"),spellCheck:!1,onChange:e=>n(e.target.value),value:t})}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,r.jsxs)("div",{className:"flex w-full items-center justify-start gap-2",children:[(0,r.jsx)(y,{handleOptionClick:N,option:"bad",selectedOption:a,children:(0,r.jsx)(s.A,{className:(0,l.cn)("size-4",{"dark:fill-red-400/80 fill-red-200":"bad"===a})})}),(0,r.jsx)(y,{handleOptionClick:N,option:"neutral",selectedOption:a,children:(0,r.jsx)(i.A,{className:(0,l.cn)("size-4",{"dark:fill-amber-500/70 fill-yellow-200":"neutral"===a})})}),(0,r.jsx)(y,{handleOptionClick:N,option:"good",selectedOption:a,children:(0,r.jsx)(o.A,{className:(0,l.cn)("size-4",{"dark:fill-green-500/60 fill-green-200":"good"===a})})}),(0,r.jsx)("div",{children:h&&(0,r.jsx)("div",{className:"text-sm text-red-700",role:"alert",children:h})})]}),(0,r.jsxs)(x.ModalFooter,{className:"p-0 md:p-0",children:[(0,r.jsx)(x.ModalClose,{asChild:!0,children:(0,r.jsx)(g.$,{size:"sm",type:"button",variant:"secondary",children:j("cancel")})}),(0,r.jsx)(g.$,{size:"sm",type:"submit",children:j("submit")})]})]})]})}},55330:(e,t,n)=>{n.d(t,{L:()=>a});var r=n(80644);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,r.useState)(new Set(e));return{values:[...t],has:e=>t.has(e),toggle:e=>n(t=>new Set(t.delete(e)?t:t.add(e))),clear:()=>n(new Set)}}},71279:(e,t,n)=>{n.d(t,{G:()=>a});var r=n(80644);function a(){return function(e){let t=(0,r.useRef)(null);return{formRef:t,onKeyDown:n=>{let r=n.currentTarget.value.trim();if(e(n)&&r.length>0){var a;null===(a=t.current)||void 0===a||a.requestSubmit(),n.preventDefault()}}}}(e=>"Enter"===e.key&&(e.ctrlKey||e.metaKey))}n(3879)},74179:(e,t,n)=>{n.d(t,{q:()=>a});var r=n(26939);function a(){let{user:e,expectUser:t}=(0,r.J)();return t&&!e?{isLoading:!0}:(t||e)&&((null==e?void 0:e.v0plan)!=="v0-enterprise"||e.isVercelian)?{canVote:!0,isLoading:!1}:{canVote:!1,isLoading:!1}}},77299:(e,t,n)=>{n.d(t,{Dp:()=>f,Ez:()=>d,eJ:()=>u,kd:()=>h});var r=n(7336),a=n(80644),l=n(47307),s=n(86511),i=n(51621),o=n(3521);let d={duration:.35,ease:[.35,.2,.14,.95]},c={x:0,y:0,z:0,rotate:0,scale:1,skew:0,opacity:1};function u(e){let{children:t,preventAnimation:n=!1}=e;return(0,r.jsx)(i.P.span,{animate:{opacity:1},initial:{opacity:+!!n},children:t})}function f(e){let{children:t,variants:n,transition:u}=e,{ref:f,controls:h,fullVariants:m}=function(e,t,n){let r=(0,l.I)(),i=(0,a.useContext)(o.w),u=(0,s.E)(),f=(0,a.useRef)(null),h=(0,a.useRef)("idle"),m=(0,a.useRef)(!1),v=(0,a.useRef)(!1),g=(0,a.useMemo)(()=>({idle:{...c,...t.idle},hover:{...c,...t.hover},tap:{...c,...t.tap}}),[t]),x=(0,a.useCallback)(async e=>{let t=g[h.current],r=g[e];if(m.current&&!1===t.interruptible||v.current||e===h.current&&m.current)return;m.current=!0;let a=h.current;h.current=e;try{await u.start({...r,transition:r.transition||n||d})}catch(e){h.current=a}finally{if(m.current=!1,r.after&&h.current===e){let{state:e,delay:t=0}=r.after;v.current=!0,setTimeout(()=>{v.current=!1,x(e)},1e3*t)}else h.current!==e&&x(h.current)}},[u,n,g]);return(0,a.useEffect)(()=>{if(!i||r)return;let t=function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t?"BUTTON"===t.tagName||"A"===t.tagName?t:n>10?(console.warn("Animated Icon can't find valid parent element (<button> or <a>) after 10 iterations. Falling back to root element."),null):e(t.parentElement,n+1):null}(f.current);if(t)return i.registerIcon(e,{parent:t,transitionTo:x}),()=>{i.unregisterIcon(e)}},[]),{ref:f,controls:u,fullVariants:g}}((0,a.useRef)(Math.random().toString(36).substr(2,9)).current,n,u);return(0,r.jsx)(i.P.span,{animate:h,className:"transition-none",initial:"idle",ref:f,variants:m,children:t})}function h(e){let{children:t,hideOverflow:n}=e;return(0,r.jsx)("span",{className:"grid [&>*]:[grid-area:1/1] ".concat(n?"overflow-hidden":""),children:t})}},80743:(e,t,n)=>{n.d(t,{q:()=>i});var r=n(26939),a=n(80644),l=n(18730),s=n(85168);function i(e){let{messageId:t}=e,{chatId:n,messages:i,activeForkKey:o}=(0,l.Pk)(),{user:d}=(0,r.J)(),{botText:c,userMessageId:u}=(0,a.useMemo)(()=>{let e={botText:void 0,userMessageId:void 0};if(!t||!o)return e;let n=i.findIndex(e=>"id"in e&&e.id===t);return n<0?e:{botText:i[n].content,userMessageId:(0,s.qR)(o,t)}},[i,t,o]);return{chatId:n,messageText:c,promptMessageId:u,messageId:t,userId:null==d?void 0:d.id}}},85168:(e,t,n)=>{n.d(t,{C1:()=>f,Ir:()=>u,K1:()=>l,Mb:()=>r,RA:()=>c,_z:()=>a,n1:()=>h,pe:()=>o,qQ:()=>s,qR:()=>i});let r=(e,t,n)=>{if(!e)return;let r=e.findIndex(e=>e===t);return r<0?e:[...e.slice(0,r),n]},a=(e,t)=>void 0===e?[t]:[...e,t],l=e=>e&&e.length>0?e[e.length-1]:void 0,s=(e,t)=>e?[...e.slice(0,e.length-1),t]:a(void 0,t),i=(e,t)=>{if(!e)return;let n=e.findIndex(e=>e===t);if(!(n<0))return e[n-1]},o="<ROOT_MESSAGE>";function d(e){let t=new Map;for(let n of e){let e=n.parentId||o;t.set(e,[...t.get(e)||[],n])}return t}function c(e){let t=d(e),n=new Set,r=new Map,l=(e,s)=>{var i;if(e&&n.has(e.id))return;let d=t.get(e?e.id:o);e&&n.add(e.id);let c=[];for(let e=0;e<(null!==(i=null==d?void 0:d.length)&&void 0!==i?i:0);e++){let t=d[e],n=a(s,t.id);c.push(n),l(t,n)}r.set(e?e.id:o,c)};return l(void 0,void 0),r}function u(e,t){let n=d(e),r=new Set,a=[];return!function e(t){if(!r.has(t))for(let l of(r.add(t),n.get(t)||[]))a.push(l.messageId),e(l.messageId)}(t||o),a}function f(e,t){let n=t,r=d(e),s=l(n)||o,i=r.get(s)||[],c=new Set;for(;i.length>0;){let{id:e}=i[0];if(c.has(e))break;c.add(e),n=a(n,e),i=r.get(e)||[]}return n}function h(e,t,n){let r,s=t;if(0===e.length)return;let i=d(e),c=e=>{var t,n;let r=new Set,s=null===(t=i.get(e&&l(e)||o))||void 0===t?void 0:t[0],d=e;for(;s&&!r.has(s.messageId);)r.add(s.messageId),d=a(d,s.messageId),s=null===(n=i.get(s.messageId))||void 0===n?void 0:n[0];return d};if(!s)return c();e.some(e=>e.messageId===s)||(s=e.reduce((e,t)=>e.createdAt>t.createdAt?e:t).messageId,null==n||n());let u=new Set;return!function e(t,n){if(!u.has(t||o))for(let l of(u.add(t||o),i.get(t||o)||[])){let t=a(n,l.messageId);if(l.messageId===s){r=t;return}e(l.messageId,t)}}(void 0,void 0),c(r)}},90756:(e,t,n)=>{n.d(t,{O:()=>a,k:()=>r});let r={messages:[],isLoading:!1,activeForkKey:void 0,isContinuing:!1,isStreaming:!1,isAuthor:!1,isRestoring:!1},a={title:"",isEmpty:!0,isNew:!1,authorId:"",ownerId:""}},91227:(e,t,n)=>{n.d(t,{H:()=>D,DownvoteDialog:()=>S});var r=n(7336),a=n(80644),l=n(81616),s=n(98898),i=n(15993),o=n(99625),d=n(15066),c=n(7877),u=n(55330),f=n(29050),h=n(2115),m=n(18730),v=n(4495),g=n(80743),x=n(38559),b=n(77299),p=n(70289);function w(){return(0,r.jsx)(b.Dp,{variants:{hover:{y:2,x:-1,rotate:12}},children:(0,r.jsx)(p.t,{"aria-hidden":!0})})}var k=n(85168),y=n(67952),j=n(59103),C=n(74179),N=n(20685);function I(){let{data:e,mutate:t}=(0,j.Ay)("downvote-dialog-data",null,{fallbackData:null});return{downvoteDialogState:e,setDownvoteDialogState:t}}function M(e){let{children:t,value:n,reasons:a}=e;return(0,r.jsx)(c.a,{className:"is-mobile:text-xs",onClick:()=>a.toggle(n),selected:a.has(n),children:t})}function S(){let{activeForkKey:e}=(0,m.Pk)(),{downvoteDialogState:t,setDownvoteDialogState:n}=I(),{messageId:c,quote:b}=(0,a.useMemo)(()=>t||{},[t]),{formRef:p,onKeyDown:w}=(0,o.w)(),{chatId:j,messageText:C,promptMessageId:S,userId:D}=(0,g.q)({messageId:c}),[T,E]=(0,a.useState)(""),R=(0,u.L)(),F=(0,y.k)("downvoteDialog"),z=(0,a.useCallback)(()=>{E(""),R.clear(),n(null)},[R,n]),L=(0,a.useCallback)(async t=>{t.preventDefault();let n=(0,k.K1)(e);if(S&&C&&c&&n)try{(0,i.oR)(F("successToast")),await Promise.all([z(),(0,h.u)("SubmitDownvote",{messageId:c,leafMessageId:n,messageText:JSON.stringify({text:C}),quote:b,reasons:R.values,freeformFeedback:T}),(0,f.p)({feedback:T,quote:b,reasons:R.values,chatId:j,leafMessageId:n,promptMessageId:S,messageId:c,userId:D,type:"downvote"})])}catch(e){console.error(e),i.oR.error("Failed to send feedback. Please try again later.")}},[S,z,c,C,e,b,R.values,T,j,D,F]),O=(0,a.useMemo)(()=>(0,r.jsxs)("form",{className:(0,v.cn)("flex flex-col","is-mobile:gap-3 is-not-mobile:gap-6"),onSubmit:L,ref:p,children:[b&&(0,r.jsxs)("div",{className:(0,v.cn)("bg-muted flex items-center gap-2 text-ellipsis py-3 text-sm text-gray-900","is-mobile:-mx-3 is-mobile:px-3 is-not-mobile:-mx-6 is-not-mobile:px-6"),children:[(0,r.jsx)("div",{className:"w-1 shrink-0 self-stretch rounded-full bg-gray-300"}),(0,r.jsx)("span",{className:"line-clamp-2",children:b})]}),(0,r.jsx)("div",{className:"flex flex-col gap-2",children:(0,r.jsxs)("div",{className:"grid w-full grid-cols-2 items-center justify-start gap-2",children:[(0,r.jsx)(M,{reasons:R,value:"inaccurate",children:F("options.incorrectInformation")}),(0,r.jsx)(M,{reasons:R,value:"off-topic",children:F("options.instructionsIgnored")}),(0,r.jsx)(M,{reasons:R,value:"lazy",children:F("options.beingLazy")}),(0,r.jsx)(M,{reasons:R,value:"style",children:F("options.dontLikeStyle")}),(0,r.jsx)(M,{reasons:R,value:"bad-recommendation",children:F("options.badRecommendation")}),(0,r.jsx)(M,{reasons:R,value:"other",children:F("options.other")})]})}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)(d.Label,{className:"text-sm font-normal text-gray-500",htmlFor:"downvote-feedback",children:[F("howCanWeImprove")," ",(0,r.jsx)("span",{className:"text-gray-400",children:F("optional")})]}),(0,r.jsx)(s.T,{asChild:!0,children:(0,r.jsx)(N.o,{id:"downvote-feedback",name:"feedback",onChange:e=>E(e.target.value),onKeyDown:w,placeholder:"Your feedback...",minHeight:80,maxHeight:192,value:T})})]}),(0,r.jsxs)("div",{className:"is-mobile:flex-col-reverse is-not-mobile:flex-row flex w-full items-center justify-end gap-2",children:[(0,r.jsx)(l.$,{className:"is-mobile:w-full",onClick:e=>{e.preventDefault(),z()},size:"sm",variant:"secondary",children:F("cancel")}),(0,r.jsx)(l.$,{className:"is-mobile:w-full",size:"sm",type:"submit",children:F("submit")})]})]}),[L,p,b,R,F,w,T,z]);return(0,r.jsx)(x.Modal,{onClose:z,onOpenChange:e=>{e||z()},open:!!t,children:(0,r.jsxs)("div",{className:"overflow-auto",children:[(0,r.jsxs)(x.ModalHeader,{children:[(0,r.jsx)(x.ModalTitle,{children:F("title")}),(0,r.jsx)(x.ModalDescription,{children:F("description",b)})]}),(0,r.jsx)(x.ModalContent,{children:O})]})})}function D(e){let{variant:t,messageId:n,quoteRef:a,tooltip:s,...i}=e,{messages:o}=(0,m.Pk)(),{setDownvoteDialogState:d}=I(),{isLoading:c,canVote:u}=(0,C.q)();if(c||!u)return null;function f(){var e;return JSON.stringify(null===(e=o.find(e=>"id"in e&&e.id===n))||void 0===e?void 0:e.content)}return"quote"===t?(0,r.jsx)(l.$,{"aria-label":"Downvote",className:"text-muted-foreground hover:text-foreground rounded-md p-0 text-sm",onClick:()=>{var e,t;(0,h.u)("OpenDownvote",{quote:null==a?void 0:null===(e=a.current)||void 0===e?void 0:e.call(a),messageId:n,messageText:f()}),d({messageId:n,quote:null==a?void 0:null===(t=a.current)||void 0===t?void 0:t.call(a)})},size:"xs",variant:"ghost",children:(0,r.jsx)(w,{"aria-hidden":!0})}):(0,r.jsx)(l.$,{"aria-label":"Downvote Response",onClick:async()=>{(0,h.u)("OpenDownvote",{messageId:n,messageText:f()}),await d({messageId:n})},size:"xs",tooltip:s,variant:"ghost",...i,children:(0,r.jsx)(w,{})})}},98898:(e,t,n)=>{n.d(t,{T:()=>i});var r=n(7336),a=n(80644),l=n(4495),s=n(45028);let i=a.forwardRef((e,t)=>{let{className:n,asChild:a=!1,...i}=e,o=a?s.DX:"textarea";return(0,r.jsx)(o,{className:(0,l.cn)("focus-visible:border-alpha-600 disabled:border-alpha-300 bg-background inline-flex min-h-20 w-full shrink-0 rounded-lg border p-3 text-sm outline-none transition-colors file:border-0 placeholder:text-gray-400 disabled:pointer-events-none disabled:cursor-not-allowed disabled:bg-gray-100 disabled:text-gray-400 disabled:ring-0",n),ref:t,...i})});i.displayName="Textarea"},99625:(e,t,n)=>{n.d(t,{w:()=>l});var r=n(80644),a=n(3879);function l(e){return{formRef:(0,r.useRef)(null),onKeyDown:(0,r.useCallback)(t=>{let n=t.currentTarget.value.trim(),r=""===n&&(null==e?void 0:e.localFileInfos)&&e.localFileInfos.length>0;if("Enter"===t.key&&!t.shiftKey&&!t.nativeEvent.isComposing){if(a.nr&&a.xl&&229===t.keyCode)return;t.preventDefault(),r?e.submitMessage():n.length>0&&(null==e||e.submitMessage())}},[e])}}}}]);